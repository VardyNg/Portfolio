<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 1</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    backgroundColor: '#2d2d2d',
    parent: 'phaser-example',
    scene: {
        preload: preload,
        create: create
    }
};

var game = new Phaser.Game(config);
var random_boolean = Math.random() >= 0.5;
var number = 4//Math.floor(Math.random() * 3) + 1; // random num 1 to 4

function preload ()
{
    this.load.image('lemming', 'assets/bomb.png');
    this.load.image('star', 'assets/star.png');
    this.load.image('platform', 'assets/sprites/player.png')
}

function create ()
{
    var points = [];
    var points2 = [];
    var circle = new Phaser.Geom.Circle(400, 300, 250);

    var sprite1 = this.add.sprite(circle.getRandomPoint().x, circle.getRandomPoint().y, 'star').setInteractive();
    var sprite2 = this.add.sprite(circle.getRandomPoint().x, circle.getRandomPoint().y, 'star').setInteractive();
    var sprite3 = this.add.sprite(circle.getRandomPoint().x, circle.getRandomPoint().y, 'star').setInteractive();
    var sprite4 = this.add.sprite(circle.getRandomPoint().x, circle.getRandomPoint().y, 'star').setInteractive();

    image1 = this.add.image(50,400, 'platform');
    image2 = this.add.image(700,400, 'platform');

    // Description: create points and join them in the curve.
    // Usage: [screenpointx, screenpointy]
    var curve_point_val = [
        [50, 400],
        [200, 200],
        [350, 300],
        [500, 500],
        [700, 400],
    ];

    for (var i = 0 ; i < curve_point_val.length; i++)
        points.push(new Phaser.Math.Vector2(curve_point_val[i][0], curve_point_val[i][1]));
    // points.push(new Phaser.Math.Vector2(50, 400));
    // points.push(new Phaser.Math.Vector2(200, 200));
    // points.push(new Phaser.Math.Vector2(350, 300));
    // points.push(new Phaser.Math.Vector2(500, 500));
    // points.push(new Phaser.Math.Vector2(700, 400));

    points2.push(new Phaser.Math.Vector2(50, 400));
    points2.push(new Phaser.Math.Vector2(200, 200));
    points2.push(new Phaser.Math.Vector2(350, 300));

    var curve = new Phaser.Curves.Spline(points);
    var curve2 = new Phaser.Curves.Spline(points2);

    var graphics = this.add.graphics();

    graphics.lineStyle(1, 0xffffff, 1);

    if (random_boolean)
        curve.draw(graphics, 64);
    else
        curve2.draw(graphics, 64);

    graphics.fillStyle(0x00ff00, 1);

    for (var i = 0; i < points.length; i++)
    {
        graphics.fillCircle(points[i].x, points[i].y, 4);
    }

    var lemming = this.add.follower(curve, 50, 400, 'lemming');


    // On Click the star will dissapear and the star will follow the track.
    sprite1.on('pointerdown', function (pointer) {
        sprite1.destroy();
        number--;
        if (number <= 0)
        {
            lemming.startFollow(4000);
            if (random_boolean == false)
            {
                graphics.clear();
                graphics.lineStyle(1, 0xffffff, 1);
                curve.draw(graphics, 64);
            }
        }
    });

        // On Click the star will dissapear and the star will follow the track.
        sprite2.on('pointerdown', function (pointer) {
        sprite2.destroy();
        number--;
        if (number <= 0)
        {
            lemming.startFollow(4000);
            if (random_boolean == false)
            {
                graphics.clear();
                graphics.lineStyle(1, 0xffffff, 1);
                curve.draw(graphics, 64);
            }
        }
    });

        // On Click the star will dissapear and the star will follow the track.
        sprite3.on('pointerdown', function (pointer) {
        sprite3.destroy();
        number--;
        if (number <= 0)
        {
            lemming.startFollow(4000);
            if (random_boolean == false)
            {
                graphics.clear();
                graphics.lineStyle(1, 0xffffff, 1);
                curve.draw(graphics, 64);
            }
        }
    });

        // On Click the star will dissapear and the star will follow the track.
        sprite4.on('pointerdown', function (pointer) {
        sprite4.destroy();
        number--;
        if (number <= 0)
        {
            lemming.startFollow(4000);
            if (random_boolean == false)
            {
                graphics.clear();
                graphics.lineStyle(1, 0xffffff, 1);
                curve.draw(graphics, 64);
            }
        }
    });
   


}

</script>

</body>
</html>